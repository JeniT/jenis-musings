<p>Michael Sperberg McQueen (CMSMcQ) has written a couple of interesting posts about <a href="http://people.w3.org/%7Ecmsmcq/blog/?p=26" title="Michael Sperberg McQueen: Allowing ‘extension primitives’ in XML Schema?">datatypes in W3C&#39;s XML Schema (XSDL)</a>. (The second is <a href="http://people.w3.org/%7Ecmsmcq/blog/?p=27" title="Michael Sperberg McQueen: Primitives and non-primitives in XSDL">a response to</a> a comment from <a href="http://recycledknowledge.blogspot.com/" title="John Cowan&#39;s Blog: Recycled Knowledge">John Cowan</a>, and attempts to justify some of the seemingly arbitrary decisions made in the set of datatypes present in XSDL 1.0.) The posts are a discussion of one of the issues against XSDL 1.1 raised by <a href="http://saxonica.blogharbor.com/" title="Michael Kay&#39;s Blog: Saxon diaries">Michael Kay</a>:</p>

<blockquote>
<p>Michael proposes: just specify that implementations may provide additional implementation-defined primitive types. In the nature of things, an implementation can do this however it wants. Some implementors will code up email dates and CSS lengths the same way they code the other primitives. Fine. Some implementors will expose the API that their existing primitive types use, so they choose, at the appropriate moment, to link in a set of extension types, or not. Some will allow users to provide implementations of extension types, using that API, and link them at run time. Some may provide extension syntax to allow users to describe new types in some usable way (DTLL, anyone?) without having to write code in Java or C or [name of language here].</p>
</blockquote>

<!--break-->

<p>Since I&#39;m principally responsible for the <a href="http://www.idealliance.org/papers/extreme/proceedings/html/2006/Tennison01/EML2006Tennison01.html" title="Extreme 2006: Datatypes for XML: the Datatyping Library Language (DTLL)">Datatype Library Language (DTLL)</a> it&#39;ll come as no surprise that I think that XSDL is currently deficient in not providing mechanisms for creating new primitive types (such as colours) or different lexical representations for the primitive types it has (such as UK-style dates). So yes, I do think XSDL would be a better schema language if it supported &quot;extension primitives&quot;. </p>

<p>In XSLT and XPath, providing extensibility hooks has proved very effective. It&#39;s enabled implementers to innovate (and those innovations fed back into the design of XSLT 2.0 and XPath 2.0). It&#39;s provided users with functionality (such as <code>xxx:node-set()</code>) that they would otherwise not have had for years, and therefore made the lives of thousands of users much easier.</p>

<p>On the other hand, it&#39;s impossible to say how XSLT and XPath would have developed if those extensibility hooks hadn&#39;t been there. Would implementers have extended the language anyway, leading to fragmentation? Would the WG have felt more pressure to get later versions of XSLT out the door if the only way the language could have been improved was through centralised changes?</p>

<p>I think the big thing that helped XSLT&#39;s extensibility actually work was <a href="http://www.exslt.org/" title="EXSLT: Extensions in XSLT">EXSLT</a> (but then, I would say that, wouldn&#39;t I?). The majority of XSLT processors implement EXSLT extensions, and even those processors that don&#39;t implement all (or any) of EXSLT have other extensibility hooks (such as <code>&lt;msxsl:script&gt;</code> or <code>&lt;xsl:function&gt;</code>) and there are third-party implementations of EXSLT&#39;s functions available so it&#39;s possible to write interoperable stylesheets while still using those functions.</p>

<p>(EXSLT is by no means perfect: if we were doing it over again, we&#39;d build in much better methods for receiving user contributions of various kinds. But I think the general principle is sound.)</p>

<p>If XSDL were to allow extension primitives, you&#39;d hope for something similar to happen:</p>

<ul>
<li>a repository for common extension primitives</li>
<li>implementations that respond to user demand for extensions in the repository</li>
<li>development of higher-level languages for defining extension primitives</li>
<li>implementations that provide hooks (in whatever way) for defining extension primitives</li>
</ul>

<p>You can&#39;t predict what implementers will do, but it seems likely that they&#39;d provide hooks for users to create their own extension primitives (albeit most likely using Java or .NET or whatever rather than a higher-level language such as DTLL). And once they do that, it&#39;s possible for the community to provide third-party implementations for extension primitives, thus retaining interoperability.</p>

<p>So I think it could work, if implementers do the right thing and the user community gets involved.</p>

<p>(Just in case you get the wrong impression: I still think <a href="http://www.relaxng.org/" title="RELAX NG">RELAX NG</a> is a vastly superior schema language to XSDL. If you need extension datatypes, you can have them in RELAX NG right now. Unfortunately, however, in the real world, you don&#39;t always get to make the right technical choice.)</p>
